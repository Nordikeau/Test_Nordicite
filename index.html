<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Nordicité - Test</title>
  
   <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.21/esri/themes/light/main.css"
    />
  
   <script src="https://js.arcgis.com/4.21/"></script>
  
  <style>
    html,
    body,
    #viewDiv {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }
	
	#Fenetre1 {
    position: absolute;
    z-index: 1000;
    background: white;
    padding: 10px;
    left: 0;
    margin: 10px;
    height: 660px;
    width: 280px;
    left: 5px;
    top: 260px;
    border-radius: .0em;
    box-shadow: 0 0 6px #999;
    }
	
	#layerListPane{
    width:5%;
}
	
	.esri-layer-list__item-label {
    display: flex;
    flex-flow: row;
    justify-content: flex-start;
    align-items: flex-start;
    flex: 1;
    color: #0c93e3;
	font-weight: bold;
    -webkit-user-select: none;
    user-select: none;
}
 

	
  </style>

  
  
  
  
  <body>
  <!--Fenêtre d'infobulle item 1  --> 
    <div  id = "Fenetre1">
	<p style="text-align:center; font-size: 14px; color:grey; font-weight: bold; ">Liste des thématiques</p>
	<p style="text-align:center; font-size: 12px; color:grey; ">à finir...</p>
	</div>
  <div id="viewDiv"></div>
</body>





  <script>
  
 require(["esri/config","esri/Map", "esri/views/MapView","esri/layers/FeatureLayer","esri/widgets/Home","esri/widgets/Zoom","esri/widgets/LayerList","esri/layers/GraphicsLayer","esri/widgets/BasemapToggle"], function (esriConfig,Map, MapView,FeatureLayer,Home,Zoom,LayerList,GraphicsLayer,BasemapToggle) {

        esriConfig.apiKey = "AAPK42ff91e61f5a45318f44727cec514cf8mmoZ9pyBkhoToszHnWulnwGinBEoozHHe1fCo-vsiEfTFBC7N8sniXmDxJizat3h";

       const map = new Map({
          basemap: "topo-vector"
        });
		


        const view = new MapView({
          map: map,
          center: [-73.688006, 45.899644], // Longitude, latitude
          zoom: 13,		  // Zoom level
          container: "viewDiv" // Div element
        });
		
		 // 1 - Create the widget
        const toggle = new BasemapToggle({
          // 2 - Set properties
          view: view, // view that provides access to the map's 'topo-vector' basemap
          nextBasemap: "hybrid" // allows for toggling to the 'hybrid' basemap
        });

        // Add widget to the top right corner of the view
        view.ui.add(toggle, "top-right");

   
		
		//////////// Enlever le bouton home /////////////
		view.ui.remove('zoom');
		
	    // Ajouter le bouton home
	    const homeBtn = new Home({
        view: view
        });
        view.ui.add(homeBtn, "top-right");
		
		//////////// Ajouter le bouton home ////////////
	    const ZoomBtn = new Zoom({
        view: view
        });
        view.ui.add(ZoomBtn, "top-right");
	    
 
	    //////////// Ajouter des label ////////////
	    const labelClass = {
          // autocasts as new LabelClass()
          symbol: {
            type: "text", // autocasts as new TextSymbol()
            color: "black",
			 haloColor: "#BEFFE8",
             haloSize: 1,
            font: {
              // autocast as new Font()
              family: "arial",
              size: 10,
              weight: "bold"
            }
          },
          labelPlacement: "center-right",
          labelExpressionInfo: {
            expression: "$feature.nom"
          }
        };
	
	    /*
        //////////// Ajouter un nouveau symbol ////////////
	    const capteurRenderer = {
        "type": "simple",
        "symbol": {
          "type": "picture-marker",
           "url": 'images/wifi-signal.png',
          "width": "18px",
          "height": "18px"
        }
      }
	   */
	   
	   
	
	
	
	
	
	
	
	
	
		/********************
         * Add feature layer
         ********************/
		 
		 // Réseau aqueduc
        const featureLayer3 = new FeatureLayer({
          url: "https://utility.arcgis.com/usrsvcs/servers/6cd9b81fb9e04304894aa9957493245c/rest/services/Z_Nordicite_PT_Echantillonage_ST_Esprit/FeatureServer/3"
        });
		
		map.add(featureLayer3);
		
		// Vannes
        const featureLayer2 = new FeatureLayer({
          url: "https://utility.arcgis.com/usrsvcs/servers/6cd9b81fb9e04304894aa9957493245c/rest/services/Z_Nordicite_PT_Echantillonage_ST_Esprit/FeatureServer/2"
        });
		
		map.add(featureLayer2);

       
		// Bornes d'incendies
        const featureLayer1 = new FeatureLayer({
          url: "https://utility.arcgis.com/usrsvcs/servers/6cd9b81fb9e04304894aa9957493245c/rest/services/Z_Nordicite_PT_Echantillonage_ST_Esprit/FeatureServer/1"
        });
		
		map.add(featureLayer1);
		
		// Point d'échantillonage
        const featureLayer = new FeatureLayer({
          url: "https://utility.arcgis.com/usrsvcs/servers/6cd9b81fb9e04304894aa9957493245c/rest/services/Z_Nordicite_PT_Echantillonage_ST_Esprit/FeatureServer/0"
        });
		
		map.add(featureLayer);
		
		// Position des capteurs
        const featureLayer4 = new FeatureLayer({
          url: "https://utility.arcgis.com/usrsvcs/servers/6cd9b81fb9e04304894aa9957493245c/rest/services/Z_Nordicite_PT_Echantillonage_ST_Esprit/FeatureServer/4",
		  labelingInfo: [labelClass]
        });
		
		map.add(featureLayer4);
		
		
        /********************
         * Add layerlist
         ********************/
		
		let layerList = new LayerList({
        view: view,
		showLegend: true,
		operationalItems: [
		{
        layer: featureLayer4,
        title: "Capteur"
		},
		{
        layer: featureLayer,
        title: "Point d'échantillonage",
		visible:false
		},
		{
        layer: featureLayer1,
        title: "Borne d'incendie",
		visible:false
		},
		{
        layer: featureLayer2,
        title: "Vanne",
		visible:false
		},
		{
        layer: featureLayer3,
        title: "Réseau d'aqueduc",
		visible:false
		},]
		
        });
        // Adds widget below other elements in the top left corner of the view
        view.ui.add(layerList, {
        position: "top-left"

        });
      
		layerList.operationalItems.reverse();
		

      });
	  
	  
	  
	  
  </script>
</head>



</html>